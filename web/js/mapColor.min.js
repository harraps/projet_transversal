var mapColor={};mapColor.map,mapColor.legend={},mapColor.legend.gradient,mapColor.legend.minValue,mapColor.legend.maxValue,mapColor.legend.label,mapColor.data={},mapColor.x=386,mapColor.y=295,mapColor.init=function(e){if(mapColor.map=Snap.select(e),"#Map"!=e){var r=mapColor.map.getBBox();if(r.height>=r.width){var a=mapColor.x/2-r.cx,t=mapColor.y/2-r.cy,o=mapColor.x/r.height;mapColor.map.transform("t"+a+","+t+"s"+o)}else{var a=mapColor.x/2-r.cx,t=mapColor.y/2-r.cy,o=mapColor.y/r.width;mapColor.map.transform("t"+a+","+t+"s"+o)}}mapColor.legend.gradient=Snap.select("#Legend_gradient"),mapColor.legend.minValue=Snap.select("#Legend_minValue"),mapColor.legend.maxValue=Snap.select("#Legend_maxValue"),mapColor.legend.label=Snap.select("#Legend_label");for(var l=mapColor.map.selectAll("path"),i=0;i<l.length;++i)l[i].click(function(){alert("clicked: "+this.attr("id"))}),l[i].hover(function(){var e=mapColor.data[this.attr("id")];this.attr({stroke:"#fff",strokeWidth:.3}),mapColor.legend.label.attr(null!=e?{text:this.attr("id")+" : "+e}:{text:this.attr("id")})},function(){this.attr({strokeWidth:0}),mapColor.legend.label.attr({text:"???"})})},mapColor.apply=function(e,r,a,t){function u(e,r,a){var o,l,d,u,c,t=(e-r)/(a-r);if(.5>=t){u=2*(.5-t),c=2*t;var o=s(i.r,n.r,u,c),l=s(i.g,n.g,u,c),d=s(i.b,n.b,u,c)}else{u=2*(1-t),c=2*(t-.5);var o=s(n.r,p.r,u,c),l=s(n.g,p.g,u,c),d=s(n.b,p.b,u,c)}return"rgb("+o+","+l+","+d+")"}function s(e,r,a,t){var o=e*a+r*t;return Math.floor(o)}mapColor.data=e;var o=Number.MAX_VALUE,l=Number.MIN_VALUE,i=tinycolor(r).toRgb(),n=tinycolor(a).toRgb(),p=tinycolor(t).toRgb();for(var d in e)o>e[d]&&(o=e[d]),l<e[d]&&(l=e[d]);mapColor.legend.minValue.attr({text:o}),mapColor.legend.maxValue.attr({text:l});for(var d in e)mapColor.map.select("#".concat(d)).attr({fill:u(e[d],o,l)});mapColor.legend.gradient.attr({fill:"l(0,0,1,0)"+r+"-"+a+"-"+t})};