var mapColor={};mapColor.map,mapColor.legend={},mapColor.legend.gradient,mapColor.legend.minValue,mapColor.legend.maxValue,mapColor.legend.label,mapColor.data={},mapColor.x=386,mapColor.y=295,mapColor.init=function(a){if(mapColor.map=Snap.select(a),"#Map"!=a){var r=mapColor.map.getBBox();if(r.height>=r.width){var e=mapColor.x/2-r.cx,o=mapColor.y/2-r.cy,t=mapColor.x/r.height;mapColor.map.transform("t"+e+","+o+"s"+t)}else{var e=mapColor.x/2-r.cx,o=mapColor.y/2-r.cy,t=mapColor.y/r.width;mapColor.map.transform("t"+e+","+o+"s"+t)}}mapColor.legend.gradient=Snap.select("#Legend_gradient"),mapColor.legend.minValue=Snap.select("#Legend_minValue"),mapColor.legend.maxValue=Snap.select("#Legend_maxValue"),mapColor.legend.label=Snap.select("#Legend_label");for(var l=mapColor.map.selectAll("path"),n=0;n<l.length;++n)l[n].click(function(){alert("clicked: "+this.attr("id"))}),l[n].hover(function(){var a=mapColor.data[this.attr("id")];this.attr({stroke:"#fff",strokeWidth:.3}),mapColor.legend.label.attr(null!=a?{text:this.attr("id")+" : "+a}:{text:this.attr("id")})},function(){this.attr({strokeWidth:0}),mapColor.legend.label.attr({text:"???"})})},mapColor.apply=function(a,r,e,o){function C(a,r,e){var t,l,m,d,C,o=(a-r)/(e-r);if(.5>=o){d=2*(.5-o),C=2*o;var t=g(n.r,p.r,d,C),l=g(n.g,p.g,d,C),m=g(n.b,p.b,d,C)}else{d=2*(1-o),C=2*(o-.5);var t=g(p.r,i.r,d,C),l=g(p.g,i.g,d,C),m=g(p.b,i.b,d,C)}return"rgb("+t+","+l+","+m+")"}function g(a,r,e,o){var t=a*e+r*o;return Math.floor(t)}mapColor.data=a;var t=Number.MAX_VALUE,l=Number.MIN_VALUE,n=tinycolor(r).toRgb(),p=tinycolor(e).toRgb(),i=tinycolor(o).toRgb();for(var m in a)t>a[m]&&(t=a[m]),l<a[m]&&(l=a[m]);mapColor.legend.minValue.attr({text:t}),mapColor.legend.maxValue.attr({text:l});for(var m in a){var d;(d=mapColor.map.select("#"+m))&&d.attr({fill:C(a[m],t,l)})}mapColor.legend.gradient.attr({fill:"l(0,0,1,0)"+r+"-"+e+"-"+o})};