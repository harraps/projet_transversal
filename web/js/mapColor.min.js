var mapColor={};mapColor.map,mapColor.legend,mapColor.x=386,mapColor.y=295,mapColor.init=function(r,o){if(mapColor.map=Snap.select(r),"#Map"!=r){var a=mapColor.map.getBBox();if(a.height>=a.width){var l=mapColor.x/2-a.cx,t=mapColor.y/2-a.cy,p=mapColor.x/a.height;mapColor.map.transform("t"+l+","+t+"s"+p)}else{var l=mapColor.x/2-a.cx,t=mapColor.y/2-a.cy,p=mapColor.y/a.width;mapColor.map.transform("t"+l+","+t+"s"+p)}}mapColor.legend=Snap.select(o)},mapColor.apply=function(r,o,a,l){function v(r,o,a){var t,p,i,v,f,l=(r-o)/(a-o);if(.5>=l){v=2*(.5-l),f=2*l;var t=C(m.r,e.r,v,f),p=C(m.g,e.g,v,f),i=C(m.b,e.b,v,f)}else{v=2*(1-l),f=2*(l-.5);var t=C(e.r,n.r,v,f),p=C(e.g,n.g,v,f),i=C(e.b,n.b,v,f)}return"rgb("+t+","+p+","+i+")"}function C(r,o,a,l){var t=r*a+o*l;return Math.floor(t)}var t=Number.MAX_VALUE,p=Number.MIN_VALUE,m=tinycolor(o).toRgb(),e=tinycolor(a).toRgb(),n=tinycolor(l).toRgb();for(var i in r)t>r[i]&&(t=r[i]),p<r[i]&&(p=r[i]);for(var i in r)mapColor.map.select("#".concat(i)).attr({fill:v(r[i],t,p)});mapColor.legend.attr({fill:"l(0,0,1,0)"+o+"-"+a+"-"+l})};