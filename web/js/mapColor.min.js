var mapColor={};mapColor.map,mapColor.legend={},mapColor.legend.gradient,mapColor.legend.minValue,mapColor.legend.maxValue,mapColor.legend.label,mapColor.data={},mapColor.x=386,mapColor.y=295,mapColor.init=function(a){if(mapColor.map=Snap.select(a),"#France"!=a){var r=mapColor.map.getBBox();if(r.height>=r.width){var o=mapColor.x/2-r.cx,l=mapColor.y/2-r.cy,e=mapColor.x/r.height;mapColor.map.transform("t"+o+","+l+"s"+e)}else{var o=mapColor.x/2-r.cx,l=mapColor.y/2-r.cy,e=mapColor.y/r.width;mapColor.map.transform("t"+o+","+l+"s"+e)}}mapColor.legend.gradient=Snap.select("#Legend_gradient"),mapColor.legend.minValue=Snap.select("#Legend_minValue"),mapColor.legend.maxValue=Snap.select("#Legend_maxValue"),mapColor.legend.label=Snap.select("#Legend_label");for(var t=mapColor.map.selectAll("path"),n=0;n<t.length;++n)t[n].click(function(){alert("clicked: "+this.attr("id"))}),t[n].hover(function(){var a=mapColor.data[this.attr("id")];this.attr({stroke:"#fff",strokeWidth:.3}),mapColor.legend.label.attr(null!=a?{text:this.attr("id")+" : "+a}:{text:this.attr("id")})},function(){this.attr({strokeWidth:0}),mapColor.legend.label.attr({text:"???"})})},mapColor.apply=function(a,r,o,l){function d(a,r,o){var e,t,i,C,d,l=(a-r)/(o-r);if(.5>=l){C=2*(.5-l),d=2*l;var e=g(n.r,m.r,C,d),t=g(n.g,m.g,C,d),i=g(n.b,m.b,C,d)}else{C=2*(1-l),d=2*(l-.5);var e=g(m.r,p.r,C,d),t=g(m.g,p.g,C,d),i=g(m.b,p.b,C,d)}return"rgb("+e+","+t+","+i+")"}function g(a,r,o,l){var e=a*o+r*l;return Math.floor(e)}mapColor.data=a;var e=Number.MAX_VALUE,t=Number.MIN_VALUE,n=tinycolor(r).toRgb(),m=tinycolor(o).toRgb(),p=tinycolor(l).toRgb();for(var i in a)e>a[i]&&(e=a[i]),t<a[i]&&(t=a[i]);mapColor.legend.minValue.attr({text:e}),mapColor.legend.maxValue.attr({text:t});for(var i in a){var C;(C=mapColor.map.select("#"+i))&&C.attr({fill:d(a[i],e,t)})}mapColor.legend.gradient.attr({fill:"l(0,0,1,0)"+r+"-"+o+"-"+l})};