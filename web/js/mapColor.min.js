var mapColor={};mapColor.map,mapColor.legend={},mapColor.legend.gradient,mapColor.legend.minValue,mapColor.legend.maxValue,mapColor.legend.label,mapColor.data={},mapColor.x=386,mapColor.y=295,mapColor.init=function(r){if(mapColor.map=Snap.select(r),"#Map"!=r){var a=mapColor.map.getBBox();if(a.height>=a.width){var t=mapColor.x/2-a.cx,e=mapColor.y/2-a.cy,o=mapColor.x/a.height;mapColor.map.transform("t"+t+","+e+"s"+o)}else{var t=mapColor.x/2-a.cx,e=mapColor.y/2-a.cy,o=mapColor.y/a.width;mapColor.map.transform("t"+t+","+e+"s"+o)}}mapColor.legend.gradient=Snap.select("#Legend_gradient"),mapColor.legend.minValue=Snap.select("#Legend_minValue"),mapColor.legend.maxValue=Snap.select("#Legend_maxValue"),mapColor.legend.label=Snap.select("#Legend_label");for(var l=mapColor.map.selectAll("path"),n=0;n<l.length;++n)l[n].click(function(){alert("clicked: "+this.attr("id"))}),l[n].hover(function(){var r=mapColor.data[this.attr("id")];this.attr({stroke:"#fff",strokeWidth:.3}),mapColor.legend.label.attr(null!=r?{text:this.attr("id")+" : "+r}:{text:this.attr("id")})},function(){this.attr({strokeWidth:0}),mapColor.legend.label.attr({text:"???"})})},mapColor.apply=function(r,a,t,e){function d(r,a,t){var o,l,m,d,f,e=(r-a)/(t-a);if(.5>=e){d=2*(.5-e),f=2*e;var o=c(n.r,i.r,d,f),l=c(n.g,i.g,d,f),m=c(n.b,i.b,d,f)}else{d=2*(1-e),f=2*(e-.5);var o=c(i.r,p.r,d,f),l=c(i.g,p.g,d,f),m=c(i.b,p.b,d,f)}return"rgb("+o+","+l+","+m+")"}function c(r,a,t,e){var o=r*t+a*e;return Math.floor(o)}mapColor.data=r;var o=Number.MAX_VALUE,l=Number.MIN_VALUE,n=tinycolor(a).toRgb(),i=tinycolor(t).toRgb(),p=tinycolor(e).toRgb();for(var m in r)o>r[m]&&(o=r[m]),l<r[m]&&(l=r[m]);mapColor.legend.minValue.attr({text:o}),mapColor.legend.maxValue.attr({text:l});for(var m in r)mapColor.map.select("#".concat(m)).attr({fill:d(r[m],o,l)});mapColor.legend.gradient.attr({fill:"l(0,0,1,0)"+a+"-"+t+"-"+e})};