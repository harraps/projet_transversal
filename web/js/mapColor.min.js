var mapColor={};mapColor.map,mapColor.legend,mapColor.x=386,mapColor.y=295,mapColor.init=function(r,a){if(mapColor.map=Snap.select(r),"#Map"!=r){var o=mapColor.map.getBBox();if(o.height>=o.width){var t=mapColor.x/2-o.cx,l=mapColor.y/2-o.cy,e=mapColor.x/o.height;mapColor.map.transform("t"+t+","+l+"s"+e)}else{var t=mapColor.x/2-o.cx,l=mapColor.y/2-o.cy,e=mapColor.y/o.width;mapColor.map.transform("t"+t+","+l+"s"+e)}}for(var i=mapColor.map.selectAll("path"),p=0;p<i.length;++p){var n=mapColor.map.text(10,10,"");n.attr({fill:"#fff"}),i[p].click(function(){alert("clicked: "+this.attr("id"))}),i[p].hover(function(){this.attr({stroke:"#fff",strokeWidth:2}),n.attr({text:this.attr("id")})},function(){this.attr({strokeWidth:0}),n.attr({text:""})})}mapColor.legend=Snap.select(a)},mapColor.apply=function(r,a,o,t){function v(r,a,o){var l,e,m,v,c,t=(r-a)/(o-a);if(.5>=t){v=2*(.5-t),c=2*t;var l=f(i.r,p.r,v,c),e=f(i.g,p.g,v,c),m=f(i.b,p.b,v,c)}else{v=2*(1-t),c=2*(t-.5);var l=f(p.r,n.r,v,c),e=f(p.g,n.g,v,c),m=f(p.b,n.b,v,c)}return"rgb("+l+","+e+","+m+")"}function f(r,a,o,t){var l=r*o+a*t;return Math.floor(l)}var l=Number.MAX_VALUE,e=Number.MIN_VALUE,i=tinycolor(a).toRgb(),p=tinycolor(o).toRgb(),n=tinycolor(t).toRgb();for(var m in r)l>r[m]&&(l=r[m]),e<r[m]&&(e=r[m]);for(var m in r)mapColor.map.select("#".concat(m)).attr({fill:v(r[m],l,e)});mapColor.legend.attr({fill:"l(0,0,1,0)"+a+"-"+o+"-"+t})};