var mapColor={};mapColor.map,mapColor.legend,mapColor.init=function(r,o){mapColor.map=Snap.select(r),mapColor.legend=Snap.select(o)},mapColor.apply=function(r,o,a,l){function m(r,o,a){var t,n,i,m,f,l=(r-o)/(a-o);if(.5>=l){m=2*(.5-l),f=2*l;var t=c(e.r,v.r,m,f),n=c(e.g,v.g,m,f),i=c(e.b,v.b,m,f)}else{m=2*(1-l),f=2*(l-.5);var t=c(v.r,p.r,m,f),n=c(v.g,p.g,m,f),i=c(v.b,p.b,m,f)}return"rgb("+t+","+n+","+i+")"}function c(r,o,a,l){var t=r*a+o*l;return Math.floor(t)}var t=Number.MAX_VALUE,n=Number.MIN_VALUE,e=tinycolor(o).toRgb(),v=tinycolor(a).toRgb(),p=tinycolor(l).toRgb();for(var i in r)t>r[i]&&(t=r[i]),n<r[i]&&(n=r[i]);for(var i in r)mapColor.map.select("#".concat(i)).attr({fill:m(r[i],t,n)});mapColor.legend.attr({fill:"l(0,0,1,0)"+o+"-"+a+"-"+l})};