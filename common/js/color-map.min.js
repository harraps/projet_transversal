var mapColor={};mapColor.gradient=function(r,t,n,a){return mapColor.luminance(a,2*(r-t)/(n-t)-1)},mapColor.inverseGradient=function(r,t,n,a){return mapColor.luminance(a,2*-(r-t)/(n-t)+1)},mapColor.composite=function(r,t,n,a,e,i,o,u,s){function h(r){var t="0123456789ABCDEF";return String(t.substr(r>>4&15,1))+t.substr(15&r,1)}var l=255*(r-t)/(n-t),I=255*(a-e)/(i-e),f=255*(o-u)/(s-u);return"#"+h(l)+h(I)+h(f)},mapColor.luminance=function(r,t){r=String(r).replace(/[^0-9a-f]/gi,""),r.length<6&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),t=t||0;var a,e,n="#";for(e=0;3>e;e++)a=parseInt(r.substr(2*e,2),16),a=Math.round(Math.min(Math.max(0,a+a*t),255)).toString(16),n+=("00"+a).substr(a.length);return n};