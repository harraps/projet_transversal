var mapColor={};mapColor.map,mapColor.legend,mapColor.init=function(r,a){mapColor.map=Snap.select(r),mapColor.legend=Snap.select(a)},mapColor.apply=function(r,a){function i(r,a,n,t){return m(t,2*(r-a)/(n-a)-1)}function m(r,a){r=String(r).replace(/[^0-9a-f]/gi,""),r.length<6&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),a=a||0;var t,o,n="#";for(o=0;3>o;o++)t=parseInt(r.substr(2*o,2),16),t=Math.round(Math.min(Math.max(0,t+t*a),255)).toString(16),n+=("00"+t).substr(t.length);return n}var n=Number.MAX_VALUE,t=Number.MIN_VALUE;for(var o in r)n>r[o]&&(n=r[o]),t<r[o]&&(t=r[o]);for(var o in r)mapColor.map.select("#".concat(o)).attr({fill:i(r[o],n,t,a)});var e=i(n,n,t,a),l=i(t,n,t,a);mapColor.legend.attr({fill:"l(0,0,1,0)".concat(e.concat("-".concat(l)))})};